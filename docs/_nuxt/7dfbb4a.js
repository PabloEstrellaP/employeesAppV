(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{410:function(e,t,r){"use strict";r.r(t);var n=r(26),o=(r(74),r(29),{data:function(){return{dialog:!1,errorDialog:!1,loading:!1,id:null,name:null,email:null,errorMsg:null,validations:{nameRules:[function(e){return!!e||"Name is required"},function(e){return!!e&&e.length<=50||"Name must be less than 50 characters"}],emailRules:[function(e){return!!e||"Email is required"},function(e){return/.+@.+\..+/.test(e)||"Email must be valid"},function(e){return e&&e.length<=50||"Email must be less than 50 characters"}]},isEdit:!1}},methods:{validate:function(){this.$refs.form.validate()&&(this.dialog=!0)},cleanForm:function(){this.$refs.form.reset()},cancelEdit:function(){this.isEdit=!1,this.$refs.form.reset(),this.id=null},getEmployee:function(e){this.isEdit=!0,this.id=e.id,this.name=e.name,this.email=e.email},addEmploye:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var body;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,body={email:e.email,name:e.name},t.next=5,e.$axios.$post("/employee",body,{headers:{"Access-Control-Allow-Origin":"*"}});case 5:t.sent&&(e.$store.commit("openSnack","Employee Added"),e.$parent.getEmployees(),e.$refs.form.reset(),e.dialog=!1,e.loading=!1),t.next=17;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.response),e.$store.commit("openSnack","Something is wrong. Please try again"),e.dialog=!1,e.loading=!1,e.errorDialog=!0,e.errorMsg=t.t0.response.data.msg;case 17:case"end":return t.stop()}}),t,null,[[0,9]])})))()},editEmploye:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var body;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,body={email:e.email,name:e.name},t.next=5,e.$axios.$put("/employee/"+e.id,body,{headers:{"Access-Control-Allow-Origin":"*"}});case 5:t.sent&&(e.$store.commit("openSnack","Employee edited"),e.$parent.getEmployees(),e.$refs.form.reset(),e.dialog=!1,e.loading=!1),t.next=17;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.response),e.$store.commit("openSnack","Something is wrong. Please try again"),e.dialog=!1,e.loading=!1,e.errorDialog=!0,e.errorMsg=t.t0.response.data.msg;case 17:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}}),l=r(84),c=r(114),d=r.n(c),m=r(198),v=r(417),f=r(405),_=r(485),h=r(486),E=r(488),k=r(399),x=r(418),y=r(402),w=r(483),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",[r("v-card-title",[e._v(e._s(e.isEdit?"Edit employee":"Add new employee"))]),e._v(" "),r("v-card-text",[r("v-form",{ref:"form"},[r("v-text-field",{attrs:{label:"Name",outlined:"",dense:"",rules:e.validations.nameRules},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("v-text-field",{attrs:{label:"Email",outlined:"",dense:"",rules:e.validations.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),e._v(" "),r("v-col",[r("v-btn",{staticClass:"info",attrs:{block:""},on:{click:function(t){return e.cleanForm()}}},[e._v("Clean")]),e._v(" "),e.isEdit?r("v-btn",{staticClass:"error mt-1",attrs:{block:""},on:{click:function(t){return e.cancelEdit()}}},[e._v("Cancel")]):e._e(),e._v(" "),r("v-btn",{staticClass:"success mt-1",attrs:{block:""},on:{click:function(t){return e.validate()}}},[e._v(e._s(e.isEdit?"Edit":"Add"))])],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"290",persistent:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[e._v("Are you sure you want to "+e._s(e.isEdit?"edit":"add")+" this employee?")]),e._v(" "),r("v-card-text",{staticClass:"mt-5"},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"error",on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),e._v(" "),r("v-btn",{staticClass:"success ml-3",on:{click:function(t){e.isEdit?e.editEmploye():e.addEmploye()}}},[e._v(e._s(e.isEdit?"Edit":"Add"))])],1)],1),e._v(" "),e.loading?r("v-progress-linear",{attrs:{indeterminate:"",color:"primary"}}):e._e()],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"290",persistent:""},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[r("v-card",[r("v-card-title",[e._v("Error")]),e._v(" "),r("v-card-text",{staticClass:"mt-5"},[e._v("\n        "+e._s(e.errorMsg)+"\n      ")]),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{staticClass:"secondary",on:{click:function(t){e.errorDialog=!1}}},[e._v(" OK ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:m.a,VCard:v.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VCol:_.a,VDialog:h.a,VForm:E.a,VLayout:k.a,VProgressLinear:x.a,VSpacer:y.a,VTextField:w.a})}}]);